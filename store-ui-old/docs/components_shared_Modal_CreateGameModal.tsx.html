<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/shared/Modal/CreateGameModal.tsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/shared/Modal/CreateGameModal.tsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { Box, Button, Card, Grid, GridProps, IconButton, Modal, Rating, styled, TextField, Typography } from "@mui/material"
import { useState } from "react";
import AddIcon from '@mui/icons-material/Add';
import { Game, GameImage } from "../../GamesList/GameItem";
import CheckIcon from '@mui/icons-material/Check';
import CancelIcon from '@mui/icons-material/Cancel';
import { createGame } from "../../../services/GameService";

interface CreateModalError {
  title?: string,
  price?: string,
  stock?: string
}

// How to use styled components instead of prop style
const style = {
  position: 'absolute' as 'absolute',
  top: '50%',
  left: '50%',
  transform: 'translate(-50%, -50%)',
  width: '50%',
  bgcolor: 'background.paper',
  border: '2px solid #000',
  boxShadow: 24,
  p: 4,
};

const newGameInitialState = {
  id: '',
  imgUrl: '',
  title: '',
  description: '',
  calification: 0,
  price: 0,
  publishDate: '',
  stock: 0,
}

const BodyContainer = styled(Grid)&lt;GridProps>(({ theme }) => ({
  padding: '1rem',
  justifyContent: 'space-evenly',
}))

const CalificationContainerStyled = styled(Grid)&lt;GridProps>(({ theme }) => ({
  justifyContent: 'flex-end'
}))

/**
 * Create game modal
 * - Displays a modal with a form to create a modal
 * - Performs form validation and request server-side Game creation
 * 
 * @component
 */
export const CreateGameModal = () => {

  const [open, setOpen] = useState(false);
  const [newGame, setNewGame] = useState&lt;Game>(newGameInitialState)
  const [errors, setErrors] = useState&lt;CreateModalError>({})


  const handleOpen = () => setOpen(true);
  const handleClose = () => {
    setOpen(false);
    resetForm()
  }

  const handleSubmit = async () => {
    if (formValidation()) {
      try {
        await createGame({ ...newGame, publishDate: new Date().toISOString() })
        handleClose()
      } catch (error:any) {
        console.log(error.data)
      }
    }
  }

  const handleCancel = () => {
    setOpen(false);
    resetForm()
  }

  const formValidation = () => {
    let errors = {};
    if (!newGame.title) { errors = { ...errors, title: 'Required' } }
    if (!newGame.price) { errors = { ...errors, price: 'Required' } }
    if (!newGame.stock) { errors = { ...errors, stock: 'Required' } }

    setErrors(errors)
    return Object.keys(errors).length === 0
  }

  const resetForm = () => {
    setNewGame(newGameInitialState)
    setErrors({})
  }

  return &lt;>
    &lt;IconButton onClick={handleOpen} aria-label="delete">
      &lt;AddIcon />
    &lt;/IconButton>
    &lt;Modal
      open={open}
      onClose={handleClose}
      aria-labelledby="modal-modal-title"
      aria-describedby="modal-modal-description"
    >
      &lt;Box sx={style}>
        &lt;Grid container>
          &lt;Grid item xs={12}>
            &lt;Typography variant="h4">Create Game&lt;/Typography>
          &lt;/Grid>
          &lt;BodyContainer container item xs={3}>
            &lt;GameImage squareSize={110} src={newGame.imgUrl} />
          &lt;/BodyContainer>
          &lt;BodyContainer container item xs={9}>
            &lt;Grid container item xs={6}>
              &lt;TextField onChange={(event) => setNewGame({ ...newGame, title: event.target.value })}
                id="standard-basic" label="Title" variant="standard"
                required
                helperText={errors.title || false}
                error={!!errors.title} />
            &lt;/Grid>
            &lt;CalificationContainerStyled container item xs={6}>
              &lt;Typography component="legend">Calification&lt;/Typography>
              &lt;Rating
                name="simple-controlled"
                value={newGame.calification}
                onChange={(event, newValue) => {
                  setNewGame({ ...newGame, calification: newValue || 1 });
                }}
              />
            &lt;/CalificationContainerStyled>
            &lt;Grid item xs={12}>
              &lt;TextField onChange={(event) => setNewGame({ ...newGame, imgUrl: event.target.value })} label="Image URL" variant="standard" />
            &lt;/Grid>
            &lt;Grid item xs={12}>
              &lt;TextField onChange={(event) => setNewGame({ ...newGame, description: event.target.value })} label="Description" variant="standard" />
            &lt;/Grid>
            &lt;Grid item xs={12}>
              &lt;TextField
                required
                onChange={(event) => setNewGame({ ...newGame, price: Number(event.target.value) })}
                label="Price" variant="standard"
                type='number'
                helperText={errors.price || false}
                error={!!errors.price} />
            &lt;/Grid>
            &lt;Grid item xs={12}>
              &lt;TextField
                required
                onChange={(event) => setNewGame({ ...newGame, stock: Number(event.target.value) })}
                label="Stock" variant="standard"
                type='number'
                helperText={errors.stock || false}
                error={!!errors.stock} />
            &lt;/Grid>
          &lt;/BodyContainer>
          &lt;Grid container item xs={12} justifyContent='space-evenly'>
            &lt;Button onClick={handleCancel} variant="outlined" startIcon={&lt;CancelIcon />}>
              Cancel
            &lt;/Button>
            &lt;Button onClick={handleSubmit} variant="contained" endIcon={&lt;CheckIcon />}>
              Submit
            &lt;/Button>
          &lt;/Grid>
        &lt;/Grid>





      &lt;/Box>
    &lt;/Modal>
  &lt;/>
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CreateGameModal.html">CreateGameModal</a></li><li><a href="GameItem.html">GameItem</a></li><li><a href="GameItemCart.html">GameItemCart</a></li><li><a href="GamesList.html">GamesList</a></li><li><a href="NavigationBar.html">NavigationBar</a></li><li><a href="SearchBar.html">SearchBar</a></li><li><a href="ShoppingCartBadge.html">ShoppingCartBadge</a></li><li><a href="ShoppingCartModal.html">ShoppingCartModal</a></li><li><a href="ThemeSwitch.html">ThemeSwitch</a></li><li><a href="ThemeToggler.html">ThemeToggler</a></li></ul><h3>Interfaces</h3><ul><li><a href="Game.html">Game</a></li><li><a href="GameCartItem.html">GameCartItem</a></li></ul><h3>Global</h3><ul><li><a href="global.html#createGame">createGame</a></li><li><a href="global.html#getGames">getGames</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Mar 08 2023 17:59:38 GMT-0500 (hora est√°ndar de Colombia)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
